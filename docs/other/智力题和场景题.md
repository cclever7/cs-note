# 智力题



## 关于3选1 

教授说有三个门,其中一个有车,另外两个有羊,
坎贝尔选了第一个门,此时教授告诉他第三个门里是羊,
问他是否改变选择,坎贝尔改选第二个门,教授问他为什么

第一次选第一个门,中的概率为1/3,则另外2/3的概率为第二个门和第三个门的概率之和,然后又已经知道第三个门已经是羊,即第三个门中的概率为0了,那么也就是说剩下的2/3的概率都在第二个门啦.所以要改选第二个门（概率为2/3）



## 赛马次数

有 25 匹马和 5 条赛道，赛马过程无法进行计时，只能知道相对快慢。问最少需要几场赛马可以知道前 3 名。

先把 25 匹马分成 5 组，进行 5 场赛马，得到每组的排名。再将每组的第 1 名选出，进行 1 场赛马，按照这场的排名将 5 组先后标为 A、B、C、D、E。可以知道，A 组的第 1 名就是所有 25 匹马的第 1 名。而第 2、3 名只可能在 A 组的 2、3 名，B 组的第 1、2 名，和 C 组的第 1 名，总共 5 匹马，让这 5 匹马再进行 1 场赛马，前两名就是第 2、3 名。所以总共是 **5+1+1=7** 场赛马。

A 组：1，**2，3**，4，5
B 组：**1，2**，3，4，5
C 组：**1**，2，3，4，5
D 组：1，2，3，4，5
E 组：1，2，3，4，5



## 用绳子计时 15 分钟（烧香、烧蝇子、烧其它）

给定两条绳子，每条绳子烧完正好一个小时，并且绳子是不均匀的。问要怎么准确测量 15 分钟。

- 点燃第一条绳子 R1 两头的同时，点燃第二条绳子 R2 的一头；

- 当 R1 烧完，正好过去 30 分钟，而 R2 还可以再烧 30 分钟；

- 点燃 R2 的另一头，15 分钟后，R2 将全部烧完。

  

## 得到 4 升的水

有两个杯子，容量分别为 5 升和 3 升，水的供应不断。问怎么用这两个杯子得到 4 升的水。

可以理解为用若干个 5 和 3 做减法得到 4。

- 不能从 3 做减法得到 4，那么只能从 5 做减法得到 4，即最后一个运算应该为 5 - 1 = 4，此时问题转换为得到 1 升的水；
- 1 升的水可以由 3 做减法得到，3 - 2 = 1，此时问题转换为得到 2 升的水；
- 5 - 3 = 2。



## 九球称重

 至少2次：第一次，一边3个，哪边轻就在哪边，一样重就是剩余的3个；

第二次，一边1个，哪边轻就是哪个，一样重就是剩余的那个；



## 称重

**药丸称重**

从药瓶#1取出一粒药丸，从药瓶#2取出两粒，从药瓶#3取出三粒，依此类推。如果每粒药丸均重1克，则称得总重量为210克（1 + 2 + … + 20 = 20 * 21 / 2 = 210），“多出来的”重量必定来自每粒多0.1克的药丸。 

药瓶的编号可由算式(weight - 210) / 0.1 得出。因此，若这堆药丸称得重量为211.3克，则药瓶#13装有较重的药丸。 

**砝码称重：有十组砝码每组十个，每个砝码重10g，其中一组每个只有9g，有能显示克数的秤最少几次能找到轻的那一组砝码？**

砝码分组1~10，第一组拿一个，第二组拿两个以此类推。。第十组拿十个放到秤上称出克数x，则y = 550 - x，第y组就是轻的那组



## 扔鸡蛋

一栋楼有 100 层，在第 N 层或者更高扔鸡蛋会破，而第 N 层往下则不会。给 2 个鸡蛋，求 N，要求最差的情况下扔鸡蛋的次数最少。

可以将楼层划分成多个区间，第一个鸡蛋 E1 用来确定 N 属于哪个区间，第二个鸡蛋 E2 按顺序遍历该区间找到 N。那么问题就转换为怎么划分区间满足最坏情况下扔鸡蛋次数最少。

E1 需要从第一个区间开始遍历到最后一个区间。如果按等大小的方式划分区间，即 E2 的遍历次数固定。那么最坏的情况是 N 在最后一个区间，此时 E1 遍历的次数最多。为了使最坏情况下 E1 和 E2 总共遍历的次数比较少，那么后面的区间大小要比前面的区间更小。具体来说，E1 每多遍历一次，E2 要少遍历一次，才使得 N 无论在哪个区间，总共遍历的次数一样。设第一个区间大小为 X，那么第二个区间的大小为 X-1，以此类推。那么 X + (X-1) + (X-2) + … + 1 = 100，得到 X (X + 1) / 2 = 100 ，即 X = 14。



## 小老鼠试毒药

毒药问题，1000瓶水，其中有一瓶可以无限稀释的毒药，要快速找出哪一瓶有毒，需要几只小白鼠

 用二进制的思路解决问题。2的十次方是1024，使用十只小鼠喝一次即可。方法是先将每瓶水编号，同时10个小鼠分别表示二进制中的一个位。将每瓶水混合到水瓶编号中二进制为1的小鼠对应的水中。喝完后统计，将死亡小鼠对应的位置为1，没死的置为0，根据死亡小鼠的编号确定有毒的是哪瓶水，如0000001010表示10号水有毒。



#### 先手必胜策略问题：100本书，每次能够拿1-5本，怎么拿能保证最后一次是你拿

 寻找每个回合固定的拿取模式。最后一次是我拿，那么上个回合最少剩下6本。那么只要保持每个回合结束后都剩下6的倍数，并且在这个回合中我拿的和对方拿的加起来为6（这样这个回合结束后剩下的还是6的倍数），就必胜。关键是第一次我必须先手拿（100%6=4）本（这不算在第一回合里面）

#### （5） 放n只蚂蚁在一条树枝上，蚂蚁与蚂蚁之间碰到就各自往反方向走，问总距离或者时间。

 碰到就当没发生，继续走，相当于碰到的两个蚂蚁交换了一下身体。其实就是每个蚂蚁从当前位置一直走直到停止的总距离或者时间。

#### （6） 瓶子换饮料问题：1000瓶饮料，3个空瓶子能够换1瓶饮料，问最多能喝几瓶

 拿走3瓶，换回1瓶，相当于减少2瓶。但是最后剩下4瓶的时候例外，这时只能换1瓶。所以我们计算1000减2能减多少次，直到剩下4.（1000-4=996，996/2=498）所以1000减2能减498次直到剩下4瓶，最后剩下的4瓶还可以换一瓶，所以总共是1000+498+1=1499瓶。



#### 在24小时里面时针分针秒针可以重合几次

 24小时中时针走2圈，而分针走24圈，时针和分针重合24-2=22次，而只要时针和分针重合，秒针一定有机会重合，所以总共重合22次





## 生成随机数问题

**给定生成1到5的随机数Rand5()，如何得到生成1到7的随机数函数Rand7()？**

思路：由大的生成小的容易，比如由Rand7()生成Rand5()，所以我们先构造一个大于7的随机数生成函数。

正确的方法是利用rand5()函数生成1-25之间的数字，然后将其中的1-21映射成1-7，丢弃22-25。例如生成(1，1)，(1，2)，(1，3)，则看成rand7()中的1，如果出现剩下的4种，则丢弃重新生成。

```c++
int rand7() {    
    int x = 22;    
    while(x > 21) {    
    x = rand5() + (rand5() - 1)*5;    
    }    
    return 1 + x%7;    
}    
```



(13) 掰巧克力问题 N*M块巧克力，每次掰一块的一行或一列，掰成1*1的巧克力需要多少次？（1000个人参加辩论赛，1V1，输了就退出，需要安排多少场比赛）（[快手]()提前批）

每次拿起一块巧克力，掰一下（无论横着还是竖着）都会变成两块，因为所有的巧克力共有N*M块，所以要掰N*M-1次，减1是因为最开始的一块是不用算进去的。

每一场辩论赛参加两个人，淘汰一个人，所以可以看作是每一场辩论赛减少一个人，直到最后剩下1个人，所以是1000-1=999场。





## 二进制问题

### 金条问题

有个商人雇用了一位手艺高超的工匠了为他做一个精致产品，工作一星期七天的代价是一条金条。商人手头上有一条金条，刚好有可以付工匠一星期的工钱。但工匠要求工钱要按每天来付。虽然他并不急着用钱，每天有钱进账，老人心里总是踏实一些。但商人家中有个规矩，金条每星期只能切二刀。后来商人想出以了个切割金条的办法，满足了工匠的要求。你知道商人是怎么切割金条才能满足工匠的吗？

切成1、2、4。这三个二进制数的组合能表示0-7中的任何一个。

------



------

## 水桶问题

### 倒水问题1

**一个装了10L水的桶，一个7L的空桶，一个3L的空桶，怎样变成2个5L**

初始时为10，0，0。
第二步7，0，3。
然后7，3，0。
然后4，3，3。
然后4，6，0。
然后1，6，3。
然后1，7，2。
然后8，0，2。
然后8，2，0。
然后5，2，3。
然后5，5，0。

------

### 倒水问题2

**如果你有无穷多的水，一个3夸脱的和一个5夸脱的提桶，你如何准确称出 4夸脱的水？**

初始时0，5
然后3，2
然后0，2
然后2，0
然后2，5
然后1，4

------

### 舀酒问题

据说有人给酒肆的老板娘出了一个难题：此人明明知道店里只有两个舀酒的勺子，分别能舀7两和11两酒，却硬要老板娘卖给他2两酒。聪明的老板娘毫不含糊，用这两个勺子在酒缸里舀酒，并倒来倒去，居然量出了2两酒，聪明的你能做到吗？

初始0，11
然后7，4
然后0，4
然后4，0
然后4，11
然后7，8
然后0，8
然后7，1
然后0，1
\------
然后1，11
然后7，5
然后0，5
然后5，0
然后5，11，
然后7，9
然后0，9
然后7，2

------

## 钱问题

### 赚钱问题

**一个人花8块钱买了一只鸡，9块钱卖掉了，然后他觉得不划算，花10块钱又买回来了，11块卖给另外一个人。问他赚了多少?**

-8+9-10+11=2

------

### 假钱问题

**老王30买了双鞋，35卖，客人花100买，老王没零钱于是向老李换了100.补给客人后，客人走远后老李突然说是假钱，于是老王补偿给了老李，问老王一共亏了多少？**

卖鞋赚了35-30=5
假钱赔了100
一共亏95

------

### 取硬币问题

**30枚面值不全相同的硬币摆成一排，甲、乙两个人轮流选择这排硬币的其中一端，并取走最外边的那枚硬币。如果你先取硬币，能保证得到的钱不会比对手少吗？**

先取者可以让自己总是取奇数位置上的硬币或者总是取偶数位置上的硬币。数一数是奇数位置上的面值总和多还是偶数位置上的面值总和多，然后总是取这些位置上的硬币就可以了。



### 旅馆问题

**有三个人去住旅馆，住三间房，每一间房10元，于是他们一共付给老板10元，于是他们一共付给老板10元，于是他们一共付给老板30，第二天，老板觉得三间房只需要25元就够了于是叫小弟退回25元就够了于是叫小弟退回25元就够了于是叫小弟退回5给三位客人，谁知小弟贪心,只退回每人1，自己偷偷拿了1，自己偷偷拿了1，自己偷偷拿了2，这样一来便等于那三位客人每人各花了九元，于是三个人一共花了27，再加上小弟独吞了不27，再加上小弟独吞了不27，再加上小弟独吞了不2，总共是29。可是当初他们三个人一共付出29。可是当初他们三个人一共付出29。可是当初他们三个人一共付出30那么还有$1呢？**

他们所消费的27元里已经包括小弟贪污的2元了，再加退还的3元=30元。：这30元现在的分布是：老板拿25元，伙计拿2元，三人各拿1元，正好！

------

## 蓝眼问题

### 蓝眼睛问题

**有个岛上住着一群人，有一天来了个游客，定了一条奇怪的规矩：所有蓝眼睛的人都必须尽快离开这个岛。每晚8点会有一个航班离岛。每个人都看得见别人眼睛的颜色，但不知道自己的（别人也不可以告知）。此外，他们不知道岛上到底有多少人是蓝眼睛的，只知道至少有一个人的眼睛是蓝色的。所有蓝眼睛的人要花几天才能离开这个岛？** 

有多少个蓝眼睛的人就会花多少天。

c=1
假设岛上所有人都是聪明的，蓝眼睛的人四处观察之后，发现没有人是蓝眼睛的。但他知道至少有一人是蓝眼睛的，于是就能推导出自己一定是蓝眼睛的。因此，他会搭乘当晚的飞机离开。 

c=2
两个蓝眼睛的人看到对方，并不确定c是1还是2，但是由上一种情况，他们知道，如果c = 1，那个蓝眼睛的人第一晚就会离岛。因此，发现另一个蓝眼睛的人仍在岛上，他一定能推断出c = 2，也就意味着他自己也是蓝眼睛的。于是，两个蓝眼睛的人都会在第二晚离岛。 

c>2
逐步提高c时，我们可以看出上述逻辑仍旧适用。如果c = 3，那么，这三个人会立即意识到有2到3人是蓝眼睛的。如果有两人是蓝眼睛的，那么这两人会在第二晚离岛。因此，如果过了第二晚另外两人还在岛上，每个蓝眼睛的人都能推断出c = 3，因此这三人都有蓝眼睛。他们会在第三晚离岛。 

不论c为什么值，都可以套用这个模式。所以，如果有c人是蓝眼睛的，则所有蓝眼睛的人要用c晚才能离岛，且都在同一晚离开。 

------

### 疯狗问题（跟蓝眼睛一样）

**有50家人家，每家一条狗。有一天警察通知，50条狗当中有病狗，行为和正常狗不一样。每人只能通过观察别人家的狗来判断自己家的狗是否生病，而不能看自己家的狗，如果判断出自己家的狗病了，就必须当天一枪打死自己家的狗。结果，第一天没有\**\*，第二天没有\**\*，第三天开始一阵枪响，问：一共死了几条狗？**

死了3条（第几天枪响就有几条）。
从有一条不正常的狗开始，显然第一天将会听到一声枪响。这里的要点是你只需站在那条不正常狗的主人的角度考虑。
有两条的话思路继续，只考虑有两条不正常狗的人，其余人无需考虑。通过第一天他们了解了对方的信息。第二天杀死自己的狗。换句话说每个人需要一天的时间证明自己的狗是正常的。有三条的话，同样只考虑那三个人，其中每一个人需要两天的时间证明自己的狗是正常的狗。

------

### 耳光问题（跟蓝眼睛一样）

一群人开舞会，每人头上都戴着一顶帽子。帽子只有黑白两种，黑的至少有一顶。每个人都能看到其他人帽子的颜色，却看不到自己的。主持人先让大家看看别人头上戴的是什么帽子，然后关灯，如果有人认为自己戴的是黑帽子，就打自己一个耳光。第一次关灯，没有声音。于是再开灯，大家再看一遍，关灯时仍然鸦雀无声。一直到第三次关灯，才有劈劈啪啪打耳光的声音响起。问有多少人戴着黑帽子？
答案：有三个人戴黑帽。假设有N个人戴黑帽，当N＝1时，戴黑帽的人看见别人都为白则能肯定自己为黑。于是第一次关灯就应该有声。可以断定N＞1。对于每个戴黑帽的人来说，他能看见N-1顶黑帽，并由此假定自己为白。但等待N-1次还没有人打自己以后，每个戴黑人都能知道自己也是黑的了。所以第N次关灯就有N个人打自己。

------

## 时间问题

### 蜡烛燃烧问题

**两根蜡烛，燃烧完都需要1小时，怎么确定15分钟是多久？**

点燃第一根的一端，第二根的两端。
第二根烧完代表半小时后，点燃第一根另一端，烧完代表15分钟。

------

## 重量问题

### 乒乓球重量

 **8个乒乓球，其中一个重，有一个秤，问至少几次能够找出重的那个乒乓球**

2次，分成3堆，3，3，2。
①称3和3，如果一样重，代表重的在2。②称2个那一堆的。
①称3和3，不一样重，重的在3里面重的那堆。②3个里面随便取2个，一样重，第三个重。不一样重，重的那个就是。

------

### 盐重量问题

**有7克、2克砝码各一个，天平一只，如何只用这些物品五次内将140克的盐分成50、90克各一份？**

第一次：先分成70和70
第二次：通过7和2砝码将70分成9和61
第三次：通过9克盐和2砝码将61分成50和11

------

### 药丸问题

**有20瓶药丸，其中19瓶装有1克/粒的药丸，余下一瓶装有1.1克/粒的药丸。给你一台称重精准的天平，怎么找出比较重的那瓶药丸？天平只能用一次。**



### 药丸问题2

**你有四个装药丸的罐子，每个药丸都有一定的重量，被污染的药丸是没被污染的重量+1.只称量一次，如何判断哪个罐子的药被污染了？** 

答：从第一盒中取出一颗，第二盒中取出2 颗，第三盒中取出三颗。 依次类推，称其总量。减去10，多的数字就是药丸罐子序号。

------

## 数学问题

### 概率问题1

**一个家庭有两个小孩，其中有一个是女孩，问另一个也是女孩的概率（假定生男生女的概率一样）**

1/3
样本空间为（男男）（女女）（男女）（女男）
A＝（已知其中一个是女孩）＝）（女女）（男女）（女男）
B＝（另一个也是女孩）＝（女女）
于是P（B／A）＝P（AB）／P（A）＝（1／4）／（3／4）＝1／3

------

### 概率问题2

**你有两个罐子，每个罐子各有若干红色弹球和蓝色弹球，两个罐子共有50个红色弹球，50个蓝色弹球，随机选出一个罐子，随机从中选取出一个弹球，要使取出的是红球的概率最大，一开始两个罐子应放几个红球，几个蓝球？在你的计划中，得到红球的准确几率是多少？**

一个罐子放1红，一个罐子放49红和50蓝，这样得到红球的概率接近3/4。

------

### 扑克牌问题

**54张扑克牌，其中有十张是翻过来的。现在把你的眼睛蒙上，让你把扑克牌分成两叠（两叠的多少可以不一样）。要求在两叠中翻过来的扑克牌是相等的。请问该怎么做？**

第一步，你在这54张牌中任意取出10张，现在，扑克牌分成了两叠。44张和10张；第二步，44张那叠不动，将10张这叠每张都翻过来，便得到了符合条件的两叠牌。

解释：第一步之后，设44张那叠中正面牌x张，10张那叠中正面牌则为10-x张。第二步之后，44张那叠中正面牌保持x张，10张那叠反过来了：反面牌为10-x张，正面牌x张。

------



### 填数字

**0 1 2 3 4 5 6 7 8 9
_ _ _ _ _ _ _ _ _ _ 在横线上填写数字，使之符合要求。
要求如下：对应的数字下填入的数，代表上面的数在下面出现的次数，比如3下面是1，代表3要在下面出现一次。**

正确答案是： 6 2 1 0 0 0 1 0 0 0

------

### 规律

**1，11，21，1211，111221，下一个数是什么？**

下行是对上一行的解释 所以新的应该是3个1 2个2 1个1 ：312211

------

### 猜数字问题

**教授选出两个从2到9的数，把它们的和告诉学生甲，把它们的积告诉学生乙，让他们轮流猜这两个数， 甲说：“我猜不出”， 乙说：“我猜不出”， 甲说：“我猜到了”， 乙说：“我也猜到了”， 问这两个数是多少？**

3和4。设两个数为n1，n2，n1> =n2，甲听到的数为n=n1 n2，乙听到的数为m=n1*n2，证明n1=3，n2=4是唯一解。

证明：要证以上命题为真，不妨先证n=7

1)必要性：
 　　i) n> 5 是显然的，因为n <4不可能，n=4或者n=5甲都不可能回答不知道
 　　ii) n> 6 因为如果n=6的话，那么甲虽然不知道(不确定2 4还是3 3)但是无论是2，4还是3，3乙都不可能说不知道(m=8或者m=9的话乙说不知道是没有道理的)
 　　iii) n <8 因为如果n> =8的话，就可以将n分解成 n=4 x 和 n=6 (x-2)，那么m可以是4x也可以是6(x-2)而4x=6(x-2)的必要条件是x=6即n=10，那样n又可以分解成8 2，所以总之当n> =8时，n至少可以分解成两种不同的合数之和，这样乙说不知道的时候，甲就没有理由马上说知道。以上证明了必要性。
2)充分性
当n=7时，n可以分解成2 5或3 4
显然2 5不符合题意，舍去，容易判断出3 4符合题意，m=12，证毕
于是得到n=7 m=12 n1=3 n2=4是唯一解。

------

## 其他问题

### 水果标签问题

**3个箱子里面放了 苹果，梨子，苹果加梨子，标签全错误，只能选择查看一箱的水果来改正所有标签**

查看贴苹果和梨标签那一个，如果拿出来的是苹果，代表这一箱只有苹果，因为如果是苹果和梨就代表标签没错了。
那么剩下的两箱就是梨，苹果和梨，剩下的标签是梨，苹果，由于标签全错，所以贴着苹果的是梨，贴着梨的是苹果和梨。
如果拿出来的是梨，同理代表这一箱只有梨。那么剩下的两箱就是苹果，苹果和梨，剩下的标签就是苹果，梨。由于标签全错，贴着苹果的就是苹果和梨，贴着梨的就是苹果。

------

### 便士标签问题（和水果标签一样）

**假设在桌上有三个密封的盒，一个盒中有2枚银币(1银币=10便士)，一个盒中有2枚镍币(1镍币=5便士)，还有一个盒中有1枚银币和1枚镍币。这些盒子被标上10便士、 15便士和20便士，但每个标签都是错误的。允许你从一个盒中拿出1枚硬币放在盒前，看到这枚硬币，你能否说出每个盒内装的东西呢？**

------

### 吃药问题

**某种药方要求非常严格，你每天需要同时服用A、B两种药片各一颗，不能多也不能少。这种药非常贵，你不希望有任何一点的浪费。一天，你打开装药片A的药瓶，倒出一粒药片放在手心；然后打开另一个药瓶，但不小心倒出了两粒药片。现在，你手心上有一颗药片A，两颗药片B，并且你无法区别哪个是A，哪个是B。你如何才能严格遵循药方服用药片，并且不能有任何的浪费？**

把手上的三片药各自切成两半，分成两堆摆放。再取出一粒药片A，也把它切成两半，然后在每一堆里加上半片的A。现在，每一堆药片恰好包含两个半片的A和两个半片的B。一天服用其中一堆即可。

------

### 硬币问题

**如何用一枚硬币等概率地产生一个1到3之间的随机整数？如果这枚硬币是不公正的呢？
答案：如果是公正的硬币，则投掷两次，“正反”为1，“反正”为2，“正正”为3，“反反”重来。**

如果是不公正的硬币，注意到出现“正反”和“反正”的概率一样，因此令“正反反正”、“反正正反”、“正反正反”分别为1、2、3，其余情况重来。另一种更妙的办法是，投掷三次硬币，“正反反”为1，“反正反”为2，“反反正”为3，其余情况重来。

------

### 灯管问题

**在房里有三盏灯，房外有三个开关，在房外看不见房内的情况，你只能进门一次，你用什么方法来区分那个开关控制那一盏灯？**

打开一个开关。过10分钟后关掉开关，并打开另一个开关。进屋确认可知：
亮的灯是由第二次打开的开关控制；
摸上去发热的不发亮的灯是由第一次打开的开关控制
剩下的第三盏灯是由未操作过的开关控制。

------

### 盲人问题

**他们都各自买了两对黑袜和两对白袜，八对袜了的布质、大小完全相同，而每对袜了都有一张商标纸连着。两位盲人不小心将八对袜了混在一起。 他们每人怎样才能取回黑袜和白袜各两对呢？**

每一对分开，一人拿一只，因为袜子不分左右脚

------

### 最大钻石问题

**一楼到十楼的每层电梯门口都放着一颗钻石，钻石大小不一。你乘坐电梯从一楼到十楼，每层楼电梯门都会打开一次，只能拿一次钻石，问怎样才能拿到最大的一颗？** 

选择前五层楼都不拿，观察各层钻石的大小，做到心中有数。后面五个楼层再选择，选择大小接近前五层楼出现过最大钻石大小的钻石。



一硬币，一面向上概率0.7，一面0.3，如何公平？（4） 

​      抛两次，     **正反**     A胜，     **反正**     B胜。     

​      
​     



## 概率

**两个人轮流抛硬币，先抛到正面的赢，问先抛的人赢的概率**

2/3 ，每一轮抛硬币，A先抛赢得概率是1/2，B后抛赢得概率是（1/2）*（1/2）= 1/4。那么     每一轮A赢得概率都是B赢得概率的2倍     ，总概率为1,所以A赢的概率是2/3。    

**54张扑克牌，平均分成3份，大小王在一份的概率** 

​      首先大王一定会在某一份中，然后要计算这一份中还要包含小王的概率。去掉大王还剩53张牌，这一份还可以分17张牌，那么每次分到小王的概率是1/53,所以总概率是17/53。     

​      规范算法：     

<img src="medium/66153173_1589803055420_16F6C01C102793BA75D2E74EDCF64397" alt="img" style="zoom:50%;" /> 



## 海盗分金币。 

从后往前想，如果只剩两个人了会怎么样，如果只剩三个？      

这个过程比较复杂，这里给出两篇讲解比较详细的博客。     

半数或超过半数：     https://blog.csdn.net/u013487601/article/details/102614263     

超过半数：     https://www.jianshu.com/p/ab2f71802733     

​     






​      **场景题**     

-  场景题：让你设计一个微信发红包的api，你会怎么设计，不能有人领到的红包里面没钱，红包数值精确到分。 

​      传入参数有总钱数，分的份数，随机分还是等分。先判断钱数能不能分那么多份，这个直接用总钱数>=0.01*份数判断就可以了。然后根据分发策略，选择随机还是等分，随机的话就给 1到总钱数-（总份数-1）*0.01 的随机数（总钱数以分为单位），等分的话直接除判断能不能除开，有余数就将余数加到最后一份里面。     

​      
​     

-  场景题：需求：谁关注了我，我关注了谁，谁与我互相关注。表该如何设计，索引怎么建。查询语句怎么写 

​      粉丝关注表使用四列，主键id，userId，fansId，是否互相关注。用两行数据来保存互相的关注关系，这样查询起来更方便，用空间换时间。     

​      主键有主键索引，剩下的字段不适合建索引，因为字段重复太多。     


​     

-  场景题，分布式多个机器生成id，如何保证不重复? 

​      \1.     **snowflake方案**     ：     

​      snowflake是Twitter开源的分布式ID生成算法，结果是一个long型的ID。其核心思想是：使用41bit作为毫秒数，10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID），12bit作为毫秒内的流水号（意味着     每个节点在每毫秒可以产生 4096 个 ID     ），最后还有一个符号位，永远是0。     

​      优点     ：     

​      1.毫秒数在高位，自增序列在低位，整个ID都是趋势递增的。     

​      2.不依赖数据库等第三方系统，以服务的方式部署，稳定性更高，生成ID的性能也是非常高的。     

​      3.可以根据自身业务特性分配bit位，非常灵活。     

​      缺点     ：     

​      强依赖机器时钟，如果     机器上时钟回拨     ，会导致发号重复或者服务会处于不可用状态。     

​      \2.     **用[Redis]()生成ID：**     

​      因为[Redis]()是单线程的，也可以用来生成全局唯一ID。可以用[Redis]()的原子操作INCR和INCRBY来实现。     

​      此外，可以使用[Redis]()集群来获取更高的吞吐量。假如一个集群中有5台[Redis]()，可以初始化每台[Redis]()的值分别是1,2,3,4,5，步长都是5，各[Redis]()生成的ID如下：     

​      A：1,6,11,16     

​      B：2,7,12,17     

​      C：3,8,13,18     

​      D：4,9,14,19     

​      E：5,10,15,20     

​      这种方式是负载到哪台机器提前定好，未来很难做修改。3~5台服务器基本能够满足需求，都可以获得不同的ID，但步长和初始值一定需要事先确定，使用[Redis]()集群也可以解决单点故障问题。     

​      另外，比较适合使用[Redis]()来生成每天从0开始的流水号，如订单号=日期+当日自增长号。可以每天在[Redis]()中生成一个Key，使用INCR进行累加。     

​      **优点：**     

​      1）不依赖于数据库，灵活方便，且性能优于数据库。     

​      2）数字ID天然[排序]()，对分页或需要[排序]()的结果很有帮助。     

​      **缺点：**     

​      1）如果系统中没有[Redis]()，需要引入新的组件，增加系统复杂度。     

​      2）需要编码和配置的工作量较大。     

-  LRU算法知道吗，怎么实现的? 

​      LRU算法：最近最少使用算法，常用于进程调度，缓存淘汰，内存页面置换等场景。     

​      使用     LinkedHashMap     可以实现，相对于HashMap,增加了双向[链表]()，用于记录节点之间的先后顺序。LinkedHashMap的构造函数提供了一个参数     accessOrder，     这个参数可以指定[链表]()是按照     插入顺序     排队还是按照     访问顺序     排队。参数为true时，就是按照访问顺序（插入，查询）排队，每次访问后这个节点就会被放到[链表]()头，而长时间不被访问的节点逐渐就到了列表尾部，当需要淘汰时，就将[链表]()尾部的节点抛弃。     


​     

-  数据库连接池怎么设计? 

​      需要考虑的问题：     

1.  限制连接池中最多、可以容纳的连接数目，避免过度消耗系统资源。 
2.  当客户请求连接，而连接池中所有连接都已被占用时，该如何处理呢？一种方式是让客户一直等待，直到有空闲连接，另一种方式是为客户分配一个新的临时连接。 
3.  当客户不再使用连接，需要把连接重新放回连接池。 
4.  连接池中允许处于空闲状态的连接的最大项目。假定允许的最长空闲时间为十分钟，并且允许空闲状态的连接最大数目为5， 

​      那么当连接池中有n个(n>5)连接处于空闲状态的时间超过十分钟时，     **就应该把n-5个连接关闭，并且从连接池中删除，**     这样才能更有效的利用系统资源。     

​      
​     

-  扫码登录是如何实现的？ 

​      https://blog.csdn.net/j3T9Z7H/article/details/106009662     

​      
​     

-  B+树和[红黑树]() 

​       [红黑树]()和一般的平衡[二叉树]()，增、删、改、查的过程和效率、时间复杂度     

​      https://www.cnblogs.com/ArleneZhangfj/articles/10067570.html     


​     



外部排序



​      **大数据类场景题**     

-  1亿个正整数,范围是0-42亿。求出现次数是2的数字，空间复杂度 

​      使用位图bitMap     。位图是以     bit     位为单位进行数据存储，这样每个字节8个位就可以存储8个数字，普通的一个int占4个字节，32位，用了位图之后可以将空间节省32倍。     

​      开一个42亿大小的位图，将这一亿个数字存进数字大小对应的位置，一个bit每存进去一个数字，就将value+1,比如第一次存8，就将索引为8的位置的value置为1，第二次就置为2，存完之后搜索value为2的key是多少。     

​      32位机器最大能表示的数字是42亿9千多万。     

​      42亿bit /(8*1024*1024) = 500MB     

​      ​     

-  算法：有一个IP地址库，假设有几十万条ip，如何判断某个ip地址是否在这个库中？ 

​      思路一：分治法，将ip地址根据前三位分成256份，然后看这个ip地址对应的网段，只比对这个网段里面是否有这个ip，当然还可以继续分下去，根据数据量来决定分成多少份。     

​      思路二：位图，将每一条ip对应位图中的一个位，2^32次方(42亿多)个数据只需要512M空间。可以实现O(1)的时间搜索，O(n)的时间存储。     

​      
​     

-  场景题：2g内存，要求一个10g文件的中位数 

​      http://blog.sina.com.cn/s/blog_8e9c63c70101f5pl.html     

​      
​     

-  带权重抽奖：100万个人，100个奖品，每个人中奖倍率不同，抽完为止，每人最多中奖一次。 

​      (面经中给的解释     **：**     先用古典概型写了一个：基础中奖几率*中奖倍率，但是这样做对前面的人有优势，于是重新思考后用几何概型写了一个，List表示线段，List中存对应人的id。）     

​      
​     

-  情景题，一个5T的文件，里面全是id，1-10^9 ，如何计算不同id的个数？ 

​      哈希到不同的文件，再逐个文件内找不同的。     

​      
​     

​      
​     

​      
​     

​      楼主目前无法给出答案的题目     ：     

​      **[算法题]()：**     

-  代码题,版本数字比较，比如"1.10.0"版本比"1.8.1"版本新，不允许使用split等函数 

-  算法：输入List<String>，删除当中形如”1_”的，返回原来的List (2) 

​      
​     

-  算法：1，4，5拼数字，最少数字（给了一个提示，n=5*i+4*j+k,result=min(i+j+k）） 

​       **
**       

-  **有一个会议室里有一个录音麦，有n个人抢着说话，麦只能录到声音最大的人，给定每个人开始的说话时间s，结束的说话时间t，说话音量vol，然后求这个麦最后录到的声音序列。** 

​       **数据范围:n 2e5。 s,t,vol 1e9**     

​      
​     

​       两个做法：     

​       离散化后用线段树区间更新     

​       扫描线+用set做优先队列维护最大音量     

​       第一反应是第一个，但是面试官不让离散化     

-  **穿墙术，三维的bfs，类似走迷宫** 

-  [算法题]()，一辆公交车，有m站，最多坐n人，输入一路上票的信息（即上车下车站），输出会不会超载 

​       我说了下开数组算前缀和的思路，面试官把m改为很大，不让直接开数组，接着我说了下用map离散化一下解决，就让我写了下map里存的结构 map<int,pair<int,int>> ，其余代码面试官也觉得没啥难度就过了.     

​      
​     

​      
​     

-  [算法题]()，全排列 

​      
​     

-  [leetcode]() 688 棋盘算概率问题 

​      
​     

-  [算法题]()，一个形如 123456789101112……的字符串，输入一个n（很大很大），输出字符串第n个字符 

​       我的做法是     **先预处理出不同位数数字占的位数**     ，之后找到     **n对应的数字位数、数字、数位。**     写完没跑过去，面试官指出我数错个数了（我算的时候，2位数算了100个，3位数1000个……），不过查找函数逻辑没问题，就下一题了     

​      （2位数 90 个，三位数900个，四位数90000个）     

​      
​     

​      
​     

​      
​     

​      **场景题：**     

-  场景题：redis设置高并发抢单一的东西，如何避免高并发对一个键进行访问？ 

​      
​     

-  场景设计：系统中有几万个任务需要在各自的特定时刻触发执行，怎么做？ 

​      
​     

-  场景题：[游戏]()里，一个玩家可能吃到很多种debuff，每个debuff有一定持续时间。给你一个定时器，怎么设计数据结构，来维护玩家的debuff状态？ 

​      
​     

-  一个很复杂的场景，大概是[微博]()用户有个关注列表，以及知道各种大V的动态，设计数据结构啥的，到最后在用户这边显示一个更新[微博]()列表这样。最后扯了一堆围绕[红黑树]()的实现 